

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Machine learning &mdash; Hyperspy 0.4.1dev documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.1dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/hyperspy_logo.ico"/>
    <link rel="top" title="Hyperspy 0.4.1dev documentation" href="../index.html" />
    <link rel="up" title="Hyperspy User Guide (DRAFT)" href="index.html" />
    <link rel="next" title="Curve fitting" href="model.html" />
    <link rel="prev" title="Tools" href="tools.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="Curve fitting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tools.html" title="Tools"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Hyperspy 0.4.1dev documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Hyperspy User Guide (DRAFT)</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="machine-learning">
<h1>Machine learning<a class="headerlink" href="#machine-learning" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>In version 0.4 the syntax of many of the machine-learning functions
has changed. It follows a summary of the changes:</p>
<ul class="last simple">
<li><cite>principal_components_analysis</cite> was renamed to <cite>decomposition</cite></li>
<li><cite>independent_components_analysis</cite> was renamed to <cite>blind_source_separation</cite></li>
<li><cite>pca_build_SI</cite> was renamed to <cite>get_decomposition_model</cite></li>
<li><cite>ica_build_SI</cite> was renamed to <cite>get_bss_model</cite></li>
<li><cite>plot_lev</cite> was renamed to <cite>plot_explained_variance_ratio</cite></li>
<li><cite>scores</cite> was renamed to <cite>loadings</cite></li>
<li><cite>mva_result</cite> was renamed to <cite>learning_results</cite></li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Hyperspy provides easy access to several machine learning algorithms which can
be useful when analysing hyperspectral data. In particular, decomposition
algorithms such as principal component analysis (PCA) or blind source separation
algorithms such as independent component analysis (ICA) are available through
the methods described in this section.</p>
<p>The behaviour of some Machine Learning functionality can be customised <a class="reference internal" href="getting_started.html#configuring-hyperspy-label"><em>customised</em></a> in the Machine Learning section Preferences.</p>
</div>
<div class="section" id="decomposition">
<span id="id1"></span><h2>Decomposition<a class="headerlink" href="#decomposition" title="Permalink to this headline">¶</a></h2>
<p>There are several methods to decompose a matrix or tensor into several factors.
The decomposition is most commonly applied as a means of noise reduction and
dimensionality reduction. One of the most popular decomposition methods is
principal component analysis (PCA). To perform PCA on your data set,
run the <a class="reference internal" href="../api/hyperspy.learn.html#hyperspy.learn.mva.MVA.decomposition" title="hyperspy.learn.mva.MVA.decomposition"><tt class="xref py py-meth docutils literal"><span class="pre">decomposition()</span></tt></a> method:</p>
<p>The default algorithm is <tt class="xref py py-const docutils literal"><span class="pre">SVD</span></tt>, which performs PCA using singular value decomposition. This method has many options. For more details read method documentation.</p>
<div class="section" id="nomenclature">
<span id="decomposition-nomenclature"></span><h3>Nomenclature<a class="headerlink" href="#nomenclature" title="Permalink to this headline">¶</a></h3>
<p>Hyperspy performs the decomposition of a dataset into two datasets:
one with the dimension of the signal space which we will call <cite>factors</cite> and the other with
the dimension of the navigation space which we will call <cite>loadings</cite>.
The same nomenclature applies to the result of BSS.</p>
</div>
<div class="section" id="poissonian-noise">
<h3>Poissonian noise<a class="headerlink" href="#poissonian-noise" title="Permalink to this headline">¶</a></h3>
<p>Most decomposition algorithms assume that the noise of the data follows a
Gaussian distribution. In the case that the data that you are analysing follow
a Poissonian distribution instead Hyperspy can &#8220;normalise&#8221; the data by
performing a scaling operation which can greatly enhance the result.</p>
<p>To perform Poissonian noise normalisation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The long way:</span>
<span class="n">s</span><span class="o">.</span><span class="n">decomposition</span><span class="p">(</span><span class="n">normalize_poissonian_noise</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

<span class="c"># Because it is the first argument we cold have simple written:</span>
<span class="n">s</span><span class="o">.</span><span class="n">decomposition</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details about the scaling procedure you can read the
<a class="reference external" href="http://onlinelibrary.wiley.com/doi/10.1002/sia.1657/abstract">following research article</a></p>
</div>
<div class="section" id="principal-component-analysis">
<h3>Principal component analysis<a class="headerlink" href="#principal-component-analysis" title="Permalink to this headline">¶</a></h3>
<div class="section" id="scree-plot">
<span id="id2"></span><h4>Scree plot<a class="headerlink" href="#scree-plot" title="Permalink to this headline">¶</a></h4>
<p>When using PCA it is often useful to estimate the dimensionality of the data
by plotting the explained variance against the component index in a
logarithmic y-scale. This plot is sometimes called scree-plot and it drops
quickly, eventually becoming a slowly descending line. The point at which it
becomes linear (often referred to as an elbow) is generally judged to be a good
estimation of the dimensionality of the data.</p>
<p>To obtain a scree plot, run the <a class="reference internal" href="../api/hyperspy.learn.html#hyperspy.learn.mva.MVA.plot_explained_variance_ratio" title="hyperspy.learn.mva.MVA.plot_explained_variance_ratio"><tt class="xref py py-meth docutils literal"><span class="pre">plot_explained_variance_ratio()</span></tt></a> method e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span><span class="o">.</span><span class="n">plot_explained_variance_ratio</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="data-denoising">
<h3>Data denoising<a class="headerlink" href="#data-denoising" title="Permalink to this headline">¶</a></h3>
<p>One of the most popular uses of PCA is data denoising. The denoising property
is achieved by using a limited set of components to make a model of the
original, omitting the later components that ideally contain only noise.</p>
<p>To perform this operation with Hyperspy running the <a class="reference internal" href="../api/hyperspy.learn.html#hyperspy.learn.mva.MVA.get_decomposition_model" title="hyperspy.learn.mva.MVA.get_decomposition_model"><tt class="xref py py-meth docutils literal"><span class="pre">get_decomposition_model()</span></tt></a> method, usually after estimating the dimension of your data e.g. by using the <a class="reference internal" href="#scree-plot"><em>Scree plot</em></a> if your algorithm of choice is PCA. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sc</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get_decomposition_model</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The components argument can be one of several things (None, int,
or list of ints):</p>
<ul class="simple">
<li>if None, all the components are used to construct the model.</li>
<li>if int, only the given number of components (starting from index 0) are used to construct the model.</li>
<li>if list of ints, only the components in the given list are used to</li>
</ul>
<p class="last">construct the model.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Unlike most of the analysis functions, this function returns a new
object.  The new object is something that you have to give a
handle to, so that you can perform operations on that object later.
That is why we use the <cite>sc = s.get_decomposition_model(components)</cite>,
which simply assign the object returned by the <tt class="xref py py-meth docutils literal"><span class="pre">get_decomposition_model()</span></tt>
method to the variable <tt class="xref py py-const docutils literal"><span class="pre">sc</span></tt>. The name of the variable is totally arbitrary
and therefore you can choose it at your will. The returned object is
a clone of the original <tt class="xref py py-const docutils literal"><span class="pre">s</span></tt> object, where the data has been replaced by the
model constructed using the chosen components.</p>
</div>
<p>Sometimes it is useful to examine the residuals between your original
data and the decomposition model. To examine residuals, use the <a class="reference internal" href="../api/hyperspy.html#hyperspy.signal.Signal.plot_residual" title="hyperspy.signal.Signal.plot_residual"><tt class="xref py py-meth docutils literal"><span class="pre">plot_residual()</span></tt></a> method on
the reconstructed object, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sc</span><span class="o">.</span><span class="n">plot_residual</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="blind-source-separation">
<h2>Blind Source Separation<a class="headerlink" href="#blind-source-separation" title="Permalink to this headline">¶</a></h2>
<p>In some cases (it largely depends on the particular application) it is possible
to obtain physically meaninful components from the result of a data
decomposition by Blind Source Separation (BSS).</p>
<p>To perform BSS on the result of a decomposition, run the <a class="reference internal" href="../api/hyperspy.learn.html#hyperspy.learn.mva.MVA.blind_source_separation" title="hyperspy.learn.mva.MVA.blind_source_separation"><tt class="xref py py-meth docutils literal"><span class="pre">blind_source_separation()</span></tt></a> method, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span><span class="o">.</span><span class="n">blind_source_separation</span><span class="p">(</span><span class="n">number_of_components</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must have performed a <a class="reference internal" href="tools.html#decomposition"><em>Tools</em></a> before you attempt to
perform BSS.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must pass an integer number of components to ICA.  The best
way to estimate this number in the case of a PCA decomposition is by
inspecting the <a class="reference internal" href="#scree-plot"><em>Scree plot</em></a>.</p>
</div>
<p>For more information about the blind source separation you can read the
<a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0893608000000265">following introductory article</a>
or <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S030439911000255X">this other article</a>
from the authors of Hyperspy for an application to EELS analysis.</p>
</div>
<div class="section" id="visualising-results">
<h2>Visualising results<a class="headerlink" href="#visualising-results" title="Permalink to this headline">¶</a></h2>
<p>Plot methods exist for the results of decomposition and blind source separation.
All the methods begin with plot:</p>
<ul class="simple">
<li><a class="reference internal" href="../api/hyperspy.html#hyperspy.signal.Signal.plot_decomposition_factors" title="hyperspy.signal.Signal.plot_decomposition_factors"><tt class="xref py py-meth docutils literal"><span class="pre">plot_decomposition_factors()</span></tt></a></li>
<li><a class="reference internal" href="../api/hyperspy.html#hyperspy.signal.Signal.plot_decomposition_loadings" title="hyperspy.signal.Signal.plot_decomposition_loadings"><tt class="xref py py-meth docutils literal"><span class="pre">plot_decomposition_loadings()</span></tt></a></li>
<li><a class="reference internal" href="../api/hyperspy.html#hyperspy.signal.Signal.plot_bss_factors" title="hyperspy.signal.Signal.plot_bss_factors"><tt class="xref py py-meth docutils literal"><span class="pre">plot_bss_factors()</span></tt></a></li>
<li><a class="reference internal" href="../api/hyperspy.html#hyperspy.signal.Signal.plot_bss_loadings" title="hyperspy.signal.Signal.plot_bss_loadings"><tt class="xref py py-meth docutils literal"><span class="pre">plot_bss_loadings()</span></tt></a></li>
</ul>
</div>
<div class="section" id="saving-and-loading-results">
<h2>Saving and loading results<a class="headerlink" href="#saving-and-loading-results" title="Permalink to this headline">¶</a></h2>
<p>There are several methods to store  the result of a machine learning
analysis.</p>
<div class="section" id="saving-in-the-main-file">
<h3>Saving in the main file<a class="headerlink" href="#saving-in-the-main-file" title="Permalink to this headline">¶</a></h3>
<p>When you save the object on which you&#8217;ve performed machine learning
analysis in the <a class="reference internal" href="io.html#hdf5-format"><em>HDF5</em></a> format (the default in Hyperspy)
(see <a class="reference internal" href="io.html#saving-files"><em>Saving data to files</em></a>) the result of the analysis is automatically saved in
the file and it is loaded with the rest of the data when you load the file.</p>
<p>This option is the simplest because everything is stored in the same file and
it does not require any extra command to recover the result of machine learning
analysis when loading a file. However, it only supports storing one
decomposition and one BSS result, what may not be enough for your purposes.</p>
</div>
<div class="section" id="saving-to-an-external-files">
<h3>Saving to an external files<a class="headerlink" href="#saving-to-an-external-files" title="Permalink to this headline">¶</a></h3>
<p>Alternatively, to save the results of the current machine learning analysis
to a file you can use the <a class="reference internal" href="../api/hyperspy.learn.html#hyperspy.learn.mva.LearningResults.save" title="hyperspy.learn.mva.LearningResults.save"><tt class="xref py py-meth docutils literal"><span class="pre">save()</span></tt></a> method, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># To save the result of the analysis</span>
<span class="n">s</span><span class="o">.</span><span class="n">learning_results</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;my_results&#39;</span><span class="p">)</span>

<span class="c"># To load back the results</span>
<span class="n">s</span><span class="o">.</span><span class="n">learning_results</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;my_results.npz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="exporting">
<h3>Exporting<a class="headerlink" href="#exporting" title="Permalink to this headline">¶</a></h3>
<p>It is possible to export the results of machine learning to any format supported
by Hyperspy using:</p>
<ul class="simple">
<li><a class="reference internal" href="../api/hyperspy.html#hyperspy.signal.Signal.export_decomposition_results" title="hyperspy.signal.Signal.export_decomposition_results"><tt class="xref py py-meth docutils literal"><span class="pre">export_decomposition_results()</span></tt></a> or</li>
<li><a class="reference internal" href="../api/hyperspy.html#hyperspy.signal.Signal.export_bss_results" title="hyperspy.signal.Signal.export_bss_results"><tt class="xref py py-meth docutils literal"><span class="pre">export_bss_results()</span></tt></a>.</li>
</ul>
<p>These methods accept many arguments to customise the way the data is exported,
so please consult the method documentation. The options include the choice of
file format, the prefixes for loadings and factors, saving figures instead of
data and more.</p>
<p>Please, note that the exported data cannot be easily be loaded into Hyperspy&#8217;s
machine learning structure.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/hyperspy_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Machine learning</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#decomposition">Decomposition</a><ul>
<li><a class="reference internal" href="#nomenclature">Nomenclature</a></li>
<li><a class="reference internal" href="#poissonian-noise">Poissonian noise</a></li>
<li><a class="reference internal" href="#principal-component-analysis">Principal component analysis</a><ul>
<li><a class="reference internal" href="#scree-plot">Scree plot</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-denoising">Data denoising</a></li>
</ul>
</li>
<li><a class="reference internal" href="#blind-source-separation">Blind Source Separation</a></li>
<li><a class="reference internal" href="#visualising-results">Visualising results</a></li>
<li><a class="reference internal" href="#saving-and-loading-results">Saving and loading results</a><ul>
<li><a class="reference internal" href="#saving-in-the-main-file">Saving in the main file</a></li>
<li><a class="reference internal" href="#saving-to-an-external-files">Saving to an external files</a></li>
<li><a class="reference internal" href="#exporting">Exporting</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tools.html"
                        title="previous chapter">Tools</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="model.html"
                        title="next chapter">Curve fitting</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/user_guide/mva.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="Curve fitting"
             >next</a> |</li>
        <li class="right" >
          <a href="tools.html" title="Tools"
             >previous</a> |</li>
        <li><a href="../index.html">Hyperspy 0.4.1dev documentation</a> &raquo;</li>
          <li><a href="index.html" >Hyperspy User Guide (DRAFT)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, The Hyperspy development team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>