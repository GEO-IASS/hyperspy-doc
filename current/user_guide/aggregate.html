

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Aggregating data &mdash; Hyperspy v0.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/hyperspy_logo.ico"/>
    <link rel="top" title="Hyperspy v0.3.0 documentation" href="../index.html" />
    <link rel="up" title="Hyperspy User Guide (DRAFT)" href="index.html" />
    <link rel="next" title="Statistical analysis" href="mva.html" />
    <link rel="prev" title="Getting started" href="getting_started.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mva.html" title="Statistical analysis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="getting_started.html" title="Getting started"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Hyperspy v0.3.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Hyperspy User Guide (DRAFT)</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="aggregating-data">
<h1>Aggregating data<a class="headerlink" href="#aggregating-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="loading-aggregate-files">
<h2>Loading Aggregate Files<a class="headerlink" href="#loading-aggregate-files" title="Permalink to this headline">¶</a></h2>
<p>Rather than loading and working with files individually, several files
can be loaded simultaneously, creating an aggregate object.  In
aggregate objects, all of the data from each set is collected into a
single data set.  Any analysis you do runs on the aggregate set, and
any results are split into separate files afterwards.</p>
<p>Here&#8217;s an example of loading multiple files:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">d</span><span class="o">=</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file1.ext&#39;</span><span class="p">,</span> <span class="s">&#39;file2.ext&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you just want to load, say, all tif files in a folder into an
aggregate, you can do something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="n">d</span><span class="o">=</span><span class="n">load</span><span class="p">(</span><span class="o">*</span><span class="n">glob</span><span class="p">(</span><span class="s">&#39;*.tif&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>glob(&#8216;<a href="#id1"><span class="problematic" id="id2">*</span></a>.tif&#8217;) returns a python list of the files.  Preceding the
function with the * transforms that list into a comma-separated
collection of the files - effectively imitating the previous code
block of comma-separated filenames.</p>
<p>Files can be added to aggregates in one of two ways, both using the
append function on any existing Aggregate object.</p>
<p>Adding files that are not yet loaded (passing filenames):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;file3.ext&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Adding files that are already loaded (passing objects):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">d2</span><span class="o">=</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file3.ext&#39;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course, the object types must match - you cannot aggregate spectrum
images with normal images.</p>
<p>Notes:
Presently, aggregate spectra are not checked for any energy
alignment.  You must have similar energy ranges, with similar numbers
of channels on all files you wish to aggregate.</p>
<p>Images are stacked along the 3rd dimension.  Any images you aggregate must
have similar dimensions in terms of pixel size.  The aggregator does
not check for calibrated size.  It does not physically make sense to
aggregate images with differing fields of view.</p>
<p>For the future of aggregate spectra, the goal is that each file must
share at least some part of their energy range.  The aggregate energy
range will be automatically truncated to include only the union of all
energy ranges.  Interpolation will be used in case of any channel mismatch
between data sets.</p>
</div>
<div class="section" id="saving-aggregate-files">
<h2>Saving Aggregate files<a class="headerlink" href="#saving-aggregate-files" title="Permalink to this headline">¶</a></h2>
<p>Aggregate files are saved similarly to other Signal based classes,
however, depending on the file format, several files will be created.
HDF5, the preferred format, will save one file containing the entire
hierarchy of the aggregate.  Other formats will create folder
structures, placing files of the desired format in folders according
to their place in the aggregate hierarchy.</p>
</div>
<div class="section" id="loading-saved-aggregate-files">
<h2>Loading Saved Aggregate Files<a class="headerlink" href="#loading-saved-aggregate-files" title="Permalink to this headline">¶</a></h2>
<p>Please, please use the HDF5 file format.  It will make your life
easier.  To load an hdf5 aggregate data set, use the simple load
command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">d</span><span class="o">=</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;filename.hdf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For all other formats, the folder hierarchy created when the aggregate
was saved must remain exactly the same, or the aggregate will no
longer load properly.  Do not delete, move, or edit files from the
automatically created folders.  When saved, a file consisting of a
table of contents of the aggregate is created.  To load the aggregate,
provide this file to the load function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">d</span><span class="o">=</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;filename_agg_contents.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/hyperspy_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Aggregating data</a><ul>
<li><a class="reference internal" href="#loading-aggregate-files">Loading Aggregate Files</a></li>
<li><a class="reference internal" href="#saving-aggregate-files">Saving Aggregate files</a></li>
<li><a class="reference internal" href="#loading-saved-aggregate-files">Loading Saved Aggregate Files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="getting_started.html"
                        title="previous chapter">Getting started</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mva.html"
                        title="next chapter">Statistical analysis</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/user_guide/aggregate.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mva.html" title="Statistical analysis"
             >next</a> |</li>
        <li class="right" >
          <a href="getting_started.html" title="Getting started"
             >previous</a> |</li>
        <li><a href="../index.html">Hyperspy v0.3.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Hyperspy User Guide (DRAFT)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, The hyperspy development team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>